@page
@model Lab7.Pages.Events.IndexModel
<h2>Events</h2>

<form method="get">
    <input asp-for="Query" placeholder="Search title or location" />
    <button type="submit">Search</button>
</form>

<table>
    <thead><tr><th>Title</th><th>Date</th><th>Location</th><th>Participants</th></tr></thead>
    <tbody>
        @foreach (var e in Model.Events)
        {
            <tr>
                <td><a asp-page="Details" asp-route-id="@e.Id">@e.Title</a></td>
                <td>@e.Date.ToString("yyyy-MM-dd")</td>
                <td>@e.Location</td>
                <td>@e.EventParticipants.Count</td>
            </tr>
        }
    </tbody>
</table>

<div>
    Page @Model.PageIndex of @Model.TotalPages
    @if (Model.PageIndex > 1)
    {
        <a asp-page="./Index" asp-route-PageIndex="@(Model.PageIndex-1)" asp-route-Query="@Model.Query">Prev</a>
    }
    @if (Model.PageIndex < Model.TotalPages)
    {
        <a asp-page="./Index" asp-route-PageIndex="@(Model.PageIndex+1)" asp-route-Query="@Model.Query">Next</a>
    }
</div>
